{"ast":null,"code":"var _jsxFileName = \"/Users/ardisred/Workspace/samples4singles/s4s-frontend/src/components/browse/BrowseSamples.js\";\n// Organized\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { SampleContext } from \"../sample/SampleProvider\";\nimport AudioPlayer from 'react-h5-audio-player';\nimport { Link } from \"react-router-dom\";\nimport \"./Browse.css\";\nimport 'react-h5-audio-player/lib/styles.css';\nexport const BrowseSamples = props => {\n  const [rSampleItem, setRSampleValue] = useState(0);\n  const [currentSample, setCurrentSample] = useState({});\n  const [noneLeft, setNoneLeft] = useState(false);\n  const {\n    favorites,\n    getUsers,\n    getFavorites,\n    getRandomSample,\n    randomSample,\n    addFavorites,\n    skipped,\n    addSkipped,\n    getSkipped\n  } = useContext(SampleContext);\n\n  function comparer(otherArray) {\n    return function (current) {\n      return otherArray.filter(function (other) {\n        return other.sample_id == current.id;\n      }).length == 0;\n    };\n  }\n\n  useEffect(() => {\n    getRandomSample();\n    getUsers();\n    getSkipped();\n    getFavorites();\n  }, []);\n  useEffect(() => {\n    //Filtration\n    let currentUser = parseInt(localStorage.getItem(\"user_number\"));\n    let thisUserFavorites = favorites.filter(faves => faves.user_id === currentUser);\n    let thisUserSkipped = skipped.filter(skip => skip.user_id === currentUser);\n\n    if (randomSample.length > 0) {\n      let randomSamplesThatHaveNotBeenFavorited = randomSample.filter(comparer(thisUserFavorites));\n      let randomSamplesThatHaveNotBeenSkippedOrFavorited = randomSamplesThatHaveNotBeenFavorited.filter(comparer(thisUserSkipped)); //Increment\n\n      if (randomSamplesThatHaveNotBeenSkippedOrFavorited.length > 0) {\n        console.log(randomSamplesThatHaveNotBeenSkippedOrFavorited[rSampleItem]);\n\n        if (rSampleItem < randomSamplesThatHaveNotBeenSkippedOrFavorited.length - 1) {\n          let increment = rSampleItem + 1;\n          setRSampleValue(increment);\n        } else {\n          setRSampleValue(0);\n        }\n\n        setCurrentSample(randomSamplesThatHaveNotBeenSkippedOrFavorited[rSampleItem]);\n      } else {\n        setNoneLeft(true);\n      }\n    }\n  }, [favorites, skipped]);\n\n  const addSampleToFavorites = () => {\n    addFavorites({\n      user: parseInt(localStorage.getItem(\"user_number\")),\n      sample: currentSample.id\n    });\n  };\n\n  const addSampleToSkipped = () => {\n    addSkipped({\n      user: parseInt(localStorage.getItem(\"user_number\")),\n      sample: currentSample.id\n    });\n  };\n\n  if (noneLeft !== true) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      class: \"sampleCard\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"link_card button4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: `/browse/${currentSample.id}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 48\n      }\n    }, currentSample.name)), /*#__PURE__*/React.createElement(AudioPlayer, {\n      autoPlayAfterSrcChange: false,\n      src: currentSample.audio_url,\n      onPlay: e => console.log(\"onPlay\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      class: \"button5\",\n      onClick: addSampleToSkipped,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }\n    }, \"Nah\"), /*#__PURE__*/React.createElement(\"button\", {\n      class: \"button2\",\n      onClick: getFavorites,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }\n    }, \"Skip\"), /*#__PURE__*/React.createElement(\"button\", {\n      class: \"button3\",\n      onClick: addSampleToFavorites,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }\n    }, \"Love\"));\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      class: \"sampleCard\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }\n    }, \"None Left\");\n  }\n};","map":{"version":3,"sources":["/Users/ardisred/Workspace/samples4singles/s4s-frontend/src/components/browse/BrowseSamples.js"],"names":["React","useContext","useEffect","useState","SampleContext","AudioPlayer","Link","BrowseSamples","props","rSampleItem","setRSampleValue","currentSample","setCurrentSample","noneLeft","setNoneLeft","favorites","getUsers","getFavorites","getRandomSample","randomSample","addFavorites","skipped","addSkipped","getSkipped","comparer","otherArray","current","filter","other","sample_id","id","length","currentUser","parseInt","localStorage","getItem","thisUserFavorites","faves","user_id","thisUserSkipped","skip","randomSamplesThatHaveNotBeenFavorited","randomSamplesThatHaveNotBeenSkippedOrFavorited","console","log","increment","addSampleToFavorites","user","sample","addSampleToSkipped","name","audio_url","e"],"mappings":"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","sourcesContent":["// Organized\nimport React, { useContext, useEffect, useState } from \"react\"\nimport { SampleContext } from \"../sample/SampleProvider\"\nimport AudioPlayer from 'react-h5-audio-player'\nimport { Link } from \"react-router-dom\"\nimport \"./Browse.css\"\nimport 'react-h5-audio-player/lib/styles.css'\n\nexport const BrowseSamples = (props) => {\n\n    const [rSampleItem, setRSampleValue] = useState(0)\n    const [currentSample, setCurrentSample] = useState({})\n    const [noneLeft, setNoneLeft] = useState(false)\n\n    const { favorites,\n        getUsers,\n        getFavorites,\n        getRandomSample,\n        randomSample,\n        addFavorites,\n        skipped,\n        addSkipped,\n        getSkipped,\n    } = useContext(SampleContext)\n\n    function comparer(otherArray) {\n        return function (current) {\n            return otherArray.filter(function (other) {\n                return other.sample_id == current.id\n            }).length == 0\n        }\n    }\n\n    useEffect(() => {\n        getRandomSample()\n        getUsers()\n        getSkipped()\n        getFavorites()\n    }, [])\n\n    useEffect(() => {\n\n        //Filtration\n        let currentUser = parseInt(localStorage.getItem(\"user_number\"))\n        let thisUserFavorites = favorites.filter(faves => faves.user_id === currentUser)\n        let thisUserSkipped = skipped.filter(skip => skip.user_id === currentUser)\n        if (randomSample.length > 0) {\n            let randomSamplesThatHaveNotBeenFavorited = randomSample.filter(comparer(thisUserFavorites))\n            let randomSamplesThatHaveNotBeenSkippedOrFavorited = randomSamplesThatHaveNotBeenFavorited.filter(comparer(thisUserSkipped))\n            //Increment\n            if (randomSamplesThatHaveNotBeenSkippedOrFavorited.length > 0) {\n                console.log(randomSamplesThatHaveNotBeenSkippedOrFavorited[rSampleItem])\n                if (rSampleItem < randomSamplesThatHaveNotBeenSkippedOrFavorited.length - 1) {\n                    let increment = rSampleItem + 1\n                    setRSampleValue(increment)\n                } else {\n                    setRSampleValue(0)\n                }\n                \n                setCurrentSample(randomSamplesThatHaveNotBeenSkippedOrFavorited[rSampleItem])\n            }\n            else {\n                setNoneLeft(true)\n            }\n        }\n    }, [favorites, skipped])\n\n    const addSampleToFavorites = () => {\n        addFavorites({\n            user: parseInt(localStorage.getItem(\"user_number\")),\n            sample: currentSample.id\n        })\n    }\n\n    const addSampleToSkipped = () => {\n        addSkipped({\n            user: parseInt(localStorage.getItem(\"user_number\")),\n            sample: currentSample.id\n        })\n    }\n\n    if (noneLeft !== true) {\n        return (\n            <div class=\"sampleCard\">\n                <div class=\"link_card button4\"><Link to={`/browse/${currentSample.id}`}>{currentSample.name}</Link></div>\n                <AudioPlayer\n                    autoPlayAfterSrcChange={false}\n                    src={currentSample.audio_url}\n                    onPlay={e => console.log(\"onPlay\")} />\n                <button class=\"button5\" onClick={addSampleToSkipped}>Nah</button>\n                <button class=\"button2\" onClick={getFavorites}>Skip</button>\n                <button class=\"button3\" onClick={addSampleToFavorites}>Love</button>\n            </div>\n        )\n    }\n    else {\n        return (\n            <div class=\"sampleCard\">\n                None Left\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}