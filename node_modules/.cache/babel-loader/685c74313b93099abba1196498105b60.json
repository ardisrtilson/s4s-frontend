{"ast":null,"code":"var _jsxFileName = \"/Users/ardisred/Workspace/samples4singles/s4s-frontend/src/components/sample/SampleDetail.js\";\n// Organized\nimport React, { useContext, useEffect, useState, useRef } from \"react\";\nimport Rating from '@material-ui/lab/Rating';\nimport { SampleContext } from \"../sample/SampleProvider\";\nimport AudioPlayer from 'react-h5-audio-player';\nimport { Link } from \"react-router-dom\";\nimport \"./Samples.css\";\nimport WaveSurfer from \"wavesurfer.js\";\nimport 'react-h5-audio-player/lib/styles.css';\nimport { HexColorPicker } from \"react-colorful\";\nimport \"react-colorful/dist/index.css\";\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nexport const SampleDetails = props => {\n  const [rSampleItem, setRSampleValue] = useState(0);\n  const [value, setValue] = useState(null);\n  const [volume, setVolume] = useState(null);\n  const [currentSample, setCurrentSample] = useState({});\n  const [noneLeft, setNoneLeft] = useState(false);\n  const [zeroed, setZeroed] = useState(false);\n  const [itemsLeftToShow, setitemsLeftToShow] = useState([]);\n  const [color, setColor] = useState(\"#aabbcc\");\n  const waveformRef = useRef(null);\n  const {\n    favorites,\n    getUsers,\n    getFavorites,\n    getRandomSample,\n    randomSample,\n    skipped,\n    addRatings,\n    getRatings,\n    singleSample,\n    ratings,\n    getSkipped,\n    randomSamplesLoaded,\n    getSampleById\n  } = useContext(SampleContext);\n  useEffect(() => {\n    waveformRef.current = WaveSurfer.create({\n      container: waveformRef.current,\n      cursorColor: \"transparent\",\n      backgroundColor: \"black\"\n    });\n    waveformRef.current.load('http://ia902606.us.archive.org/35/items/shortpoetry_047_librivox/song_cjrg_teasdale_64kb.mp3');\n    waveformRef.current.setWaveColor(color);\n  }, []);\n  useEffect(() => {\n    waveformRef.current.setWaveColor(color);\n  }, [color]);\n\n  function comparer(otherArray) {\n    return function (current) {\n      return otherArray.filter(function (other) {\n        return other.sample_id == current.id;\n      }).length == 0;\n    };\n  }\n\n  const addComment = () => {\n    addRatings({\n      sample: currentSample.id,\n      color: color,\n      rating: value,\n      loudness: volume\n    });\n  };\n\n  useEffect(() => {\n    let sampleId = parseInt(props.match.params.sampleId);\n    getUsers().then(getSkipped).then(getFavorites).then(getSampleById(sampleId));\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"sampleContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    class: \"img\",\n    src: singleSample.sample_image,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"link_card button4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `/browse/${singleSample.id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 48\n    }\n  }, singleSample.name)), /*#__PURE__*/React.createElement(\"div\", {\n    ref: waveformRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(AudioPlayer, {\n    autoPlayAfterSrcChange: false,\n    src: singleSample.audio_url,\n    onPlay: e => console.log(\"onPlay\"),\n    onVolumeChange: e => setVolume(e.target.volume),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    color: \"inherit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }, \"Login\")));\n};","map":{"version":3,"sources":["/Users/ardisred/Workspace/samples4singles/s4s-frontend/src/components/sample/SampleDetail.js"],"names":["React","useContext","useEffect","useState","useRef","Rating","SampleContext","AudioPlayer","Link","WaveSurfer","HexColorPicker","TextField","Button","SampleDetails","props","rSampleItem","setRSampleValue","value","setValue","volume","setVolume","currentSample","setCurrentSample","noneLeft","setNoneLeft","zeroed","setZeroed","itemsLeftToShow","setitemsLeftToShow","color","setColor","waveformRef","favorites","getUsers","getFavorites","getRandomSample","randomSample","skipped","addRatings","getRatings","singleSample","ratings","getSkipped","randomSamplesLoaded","getSampleById","current","create","container","cursorColor","backgroundColor","load","setWaveColor","comparer","otherArray","filter","other","sample_id","id","length","addComment","sample","rating","loudness","sampleId","parseInt","match","params","then","sample_image","name","audio_url","e","console","log","target"],"mappings":"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","sourcesContent":["// Organized\nimport React, { useContext, useEffect, useState, useRef } from \"react\"\nimport Rating from '@material-ui/lab/Rating';\nimport { SampleContext } from \"../sample/SampleProvider\"\nimport AudioPlayer from 'react-h5-audio-player'\nimport { Link } from \"react-router-dom\"\nimport \"./Samples.css\"\nimport WaveSurfer from \"wavesurfer.js\";\nimport 'react-h5-audio-player/lib/styles.css'\nimport { HexColorPicker } from \"react-colorful\";\nimport \"react-colorful/dist/index.css\";\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\n\nexport const SampleDetails = (props) => {\n\n    const [rSampleItem, setRSampleValue] = useState(0)\n    const [value, setValue] = useState(null)\n    const [volume, setVolume] = useState(null)\n    const [currentSample, setCurrentSample] = useState({})\n    const [noneLeft, setNoneLeft] = useState(false)\n    const [zeroed, setZeroed] = useState(false)\n    const [itemsLeftToShow, setitemsLeftToShow] = useState([])\n    const [color, setColor] = useState(\"#aabbcc\");\n\n    const waveformRef = useRef(null);\n\n    const { favorites,\n        getUsers,\n        getFavorites,\n        getRandomSample,\n        randomSample,\n        skipped,\n        addRatings,\n        getRatings,\n        singleSample,\n        ratings,\n        getSkipped,\n        randomSamplesLoaded,\n        getSampleById,\n    } = useContext(SampleContext)\n\n    useEffect(() => {\n        waveformRef.current = WaveSurfer.create({ \n          container: waveformRef.current,\n          cursorColor: \"transparent\",\n          backgroundColor: \"black\"\n        });\n        waveformRef.current.load('http://ia902606.us.archive.org/35/items/shortpoetry_047_librivox/song_cjrg_teasdale_64kb.mp3')\n        waveformRef.current.setWaveColor(color)\n      }, []);\n\n      useEffect(() => {\n        waveformRef.current.setWaveColor(color)\n      }, [color]);\n\n    function comparer(otherArray) {\n        return function (current) {\n            return otherArray.filter(function (other) {\n                return other.sample_id == current.id\n            }).length == 0\n        }\n    }\n\n    const addComment = () => {\n        addRatings({\n            sample: currentSample.id,\n            color: color,\n            rating: value,\n            loudness: volume\n        })\n    }\n    \n    useEffect(() => {\n        let sampleId = parseInt(props.match.params.sampleId)\n        getUsers().then(getSkipped).then(getFavorites).then(getSampleById(sampleId))\n    }, [])\n\n        return (\n            <>\n            <div class=\"sampleContainer\">\n            <img class=\"img\" src={singleSample.sample_image}></img>\n                <div class=\"link_card button4\"><Link to={`/browse/${singleSample.id}`}>{singleSample.name}</Link></div>\n                <div ref={waveformRef} />\n                <AudioPlayer\n                    autoPlayAfterSrcChange={false}\n                    src={singleSample.audio_url}\n                    onPlay={e => console.log(\"onPlay\")}\n                    onVolumeChange={e => setVolume(e.target.volume)} />\n            <TextField></TextField>\n            <Button color=\"inherit\">Login</Button>\n            </div>\n            </>\n        )\n}"]},"metadata":{},"sourceType":"module"}