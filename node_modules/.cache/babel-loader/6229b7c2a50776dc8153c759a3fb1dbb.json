{"ast":null,"code":"var _jsxFileName = \"/Users/ardisred/Workspace/samples4singles/s4s-frontend/src/components/browse/BrowseSamples.js\";\n// Organized\nimport React, { useContext, useEffect, Component } from \"react\";\nimport { SampleContext } from \"../sample/SampleProvider\";\nimport AudioPlayer from 'react-h5-audio-player';\nimport { Link } from \"react-router-dom\";\nimport \"./Browse.css\";\nimport 'react-h5-audio-player/lib/styles.css';\nlet currentSample = {};\nlet rSampleItem = 0;\nexport const BrowseSamples = props => {\n  const {\n    favorites,\n    getUsers,\n    getFavorites,\n    getRandomSample,\n    randomSample,\n    addFavorites,\n    skipped,\n    addSkipped,\n    getSkipped\n  } = useContext(SampleContext);\n\n  function comparer(otherArray) {\n    return function (current) {\n      return otherArray.filter(function (other) {\n        return other.sample_id == current.id;\n      }).length == 0;\n    };\n  }\n\n  useEffect(() => {\n    getUsers();\n    getRandomSample();\n    getSkipped();\n    getFavorites();\n    rSampleItem = 0;\n  }, []);\n  useEffect(() => {\n    //Filtration\n    let currentUser = parseInt(localStorage.getItem(\"user_number\"));\n    let thisUserFavorites = favorites.filter(faves => faves.user_id === currentUser);\n    let thisUserSkipped = skipped.filter(skip => skip.user_id === currentUser);\n    let notFaves = randomSample.filter(comparer(thisUserFavorites));\n    let notFavesOrSkipped = notFaves.filter(comparer(thisUserSkipped));\n    console.log(rSampleItem); //Increment \n\n    if (notFavesOrSkipped[rSampleItem] !== undefined) {\n      currentSample = notFavesOrSkipped[rSampleItem];\n\n      if (rSampleItem < notFavesOrSkipped.length - 1) {\n        rSampleItem++;\n      } else {\n        rSampleItem = 0;\n      }\n    } else {\n      rSampleItem = 0;\n      currentSample = {};\n    }\n  }, [favorites, skipped]);\n\n  const addSampleToFavorites = () => {\n    addFavorites({\n      user: parseInt(localStorage.getItem(\"user_number\")),\n      sample: currentSample.id\n    });\n  };\n\n  const addSampleToSkipped = () => {\n    addSkipped({\n      user: parseInt(localStorage.getItem(\"user_number\")),\n      sample: currentSample.id\n    });\n  }; // if(outOfSamples === false){\n\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"link_card button4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `/browse/${currentSample.id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 44\n    }\n  }, currentSample.name)), /*#__PURE__*/React.createElement(AudioPlayer, {\n    autoPlayAfterSrcChange: false,\n    src: currentSample.audio_url,\n    onPlay: e => console.log(\"onPlay\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    class: \"button5\",\n    onClick: addSampleToSkipped,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 21\n    }\n  }, \"Nah\"), /*#__PURE__*/React.createElement(\"button\", {\n    class: \"button2\",\n    onClick: getFavorites,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 21\n    }\n  }, \"Skip\"), /*#__PURE__*/React.createElement(\"button\", {\n    class: \"button3\",\n    onClick: addSampleToFavorites,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 21\n    }\n  }, \"Love\"));\n}; // else {\n//     return (\n//         <>\n//         <section class=\"sampleCard\">\n//         <div class=\"link_card button4\"><Link to={`/crushes`}>You've checked out all the samples we've got right now.</Link></div>\n//         </section>\n//         </>     \n//     )}\n// }","map":{"version":3,"sources":["/Users/ardisred/Workspace/samples4singles/s4s-frontend/src/components/browse/BrowseSamples.js"],"names":["React","useContext","useEffect","Component","SampleContext","AudioPlayer","Link","currentSample","rSampleItem","BrowseSamples","props","favorites","getUsers","getFavorites","getRandomSample","randomSample","addFavorites","skipped","addSkipped","getSkipped","comparer","otherArray","current","filter","other","sample_id","id","length","currentUser","parseInt","localStorage","getItem","thisUserFavorites","faves","user_id","thisUserSkipped","skip","notFaves","notFavesOrSkipped","console","log","undefined","addSampleToFavorites","user","sample","addSampleToSkipped","name","audio_url","e"],"mappings":"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","sourcesContent":["// Organized\nimport React, { useContext, useEffect, Component } from \"react\"\nimport { SampleContext } from \"../sample/SampleProvider\"\nimport AudioPlayer from 'react-h5-audio-player'\nimport { Link } from \"react-router-dom\"\nimport \"./Browse.css\"\nimport 'react-h5-audio-player/lib/styles.css'\n\n\nlet currentSample = {}\nlet rSampleItem = 0\n\nexport const BrowseSamples = (props) => {\n    \n    const {favorites,  \n        getUsers,\n        getFavorites,\n        getRandomSample,\n        randomSample,\n        addFavorites,\n        skipped,\n        addSkipped,\n        getSkipped,\n    } = useContext(SampleContext)\n\n    function comparer(otherArray){\n        return function(current){\n            return otherArray.filter(function(other){\n            return other.sample_id == current.id\n            }).length == 0\n            }\n        }\n\n    useEffect(() => {\n        getUsers()\n        getRandomSample()\n        getSkipped()\n        getFavorites()\n        rSampleItem = 0\n    }, [])\n\n    useEffect(() => {\n        //Filtration\n        let currentUser = parseInt(localStorage.getItem(\"user_number\"))\n        let thisUserFavorites = favorites.filter(faves => faves.user_id === currentUser)\n        let thisUserSkipped = skipped.filter(skip => skip.user_id === currentUser)\n        let notFaves = randomSample.filter(comparer(thisUserFavorites))\n        let notFavesOrSkipped = notFaves.filter(comparer(thisUserSkipped))\n        console.log(rSampleItem)\n\n        //Increment \n        if (notFavesOrSkipped[rSampleItem] !== undefined){\n            currentSample = notFavesOrSkipped[rSampleItem]\n            if (rSampleItem < notFavesOrSkipped.length - 1){rSampleItem++} else {rSampleItem = 0}\n        }\n        else{rSampleItem = 0; currentSample = {}}\n\n    }, [favorites, skipped])\n\n    const addSampleToFavorites = () => {\n        addFavorites({\n            user: parseInt(localStorage.getItem(\"user_number\")),\n            sample: currentSample.id})\n    }\n\n      const addSampleToSkipped = () => {\n        addSkipped({\n          user: parseInt(localStorage.getItem(\"user_number\")),\n          sample: currentSample.id\n      })\n      }\n\n    // if(outOfSamples === false){\n        \n        return (\n            <>\n            <div class=\"link_card button4\"><Link to={`/browse/${currentSample.id}`}>{currentSample.name}</Link></div>\n                    <AudioPlayer \n                        autoPlayAfterSrcChange={false}\n                        src={currentSample.audio_url}\n                        onPlay={e => console.log(\"onPlay\")}/>\n                    <button class=\"button5\" onClick={addSampleToSkipped}>Nah</button>\n                    <button class=\"button2\" onClick={getFavorites}>Skip</button>\n                    <button class=\"button3\" onClick={addSampleToFavorites}>Love</button>\n            </>     \n        )}\n    // else {\n    //     return (\n    //         <>\n    //         <section class=\"sampleCard\">\n    //         <div class=\"link_card button4\"><Link to={`/crushes`}>You've checked out all the samples we've got right now.</Link></div>\n    //         </section>\n    //         </>     \n    //     )}\n    // }"]},"metadata":{},"sourceType":"module"}